<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "70e5a428b607cd5a9a4f422c2a4df03d",
  "translation_date": "2025-08-24T22:06:19+00:00",
  "source_file": "2-farm/lessons/1-predict-plant-growth/virtual-device-temp.md",
  "language_code": "zh"
}
-->
# æµ‹é‡æ¸©åº¦ - è™šæ‹Ÿç‰©è”ç½‘ç¡¬ä»¶

åœ¨æœ¬èŠ‚è¯¾ç¨‹ä¸­ï¼Œæ‚¨å°†ä¸ºè™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡æ·»åŠ ä¸€ä¸ªæ¸©åº¦ä¼ æ„Ÿå™¨ã€‚

## è™šæ‹Ÿç¡¬ä»¶

è™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡å°†ä½¿ç”¨æ¨¡æ‹Ÿçš„ Grove æ•°å­—æ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨ã€‚è¿™ä½¿å¾—æœ¬å®éªŒä¸ä½¿ç”¨å¸¦æœ‰ç‰©ç† Grove DHT11 ä¼ æ„Ÿå™¨çš„æ ‘è“æ´¾ä¿æŒä¸€è‡´ã€‚

è¯¥ä¼ æ„Ÿå™¨ç»“åˆäº†ä¸€ä¸ª**æ¸©åº¦ä¼ æ„Ÿå™¨**å’Œä¸€ä¸ª**æ¹¿åº¦ä¼ æ„Ÿå™¨**ï¼Œä½†åœ¨æœ¬å®éªŒä¸­ï¼Œæ‚¨åªéœ€å…³æ³¨æ¸©åº¦ä¼ æ„Ÿå™¨éƒ¨åˆ†ã€‚åœ¨ç‰©ç†ç‰©è”ç½‘è®¾å¤‡ä¸­ï¼Œæ¸©åº¦ä¼ æ„Ÿå™¨é€šå¸¸æ˜¯ä¸€ä¸ª[çƒ­æ•ç”µé˜»](https://wikipedia.org/wiki/Thermistor)ï¼Œé€šè¿‡æ„ŸçŸ¥ç”µé˜»éšæ¸©åº¦å˜åŒ–è€Œå˜åŒ–æ¥æµ‹é‡æ¸©åº¦ã€‚æ¸©åº¦ä¼ æ„Ÿå™¨é€šå¸¸æ˜¯æ•°å­—ä¼ æ„Ÿå™¨ï¼Œå®ƒä¼šåœ¨å†…éƒ¨å°†æµ‹å¾—çš„ç”µé˜»è½¬æ¢ä¸ºæ‘„æ°åº¦ï¼ˆæˆ–å¼€å°”æ–‡ã€åæ°åº¦ï¼‰çš„æ¸©åº¦ã€‚

### å°†ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit

è¦ä½¿ç”¨è™šæ‹Ÿæ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œæ‚¨éœ€è¦å°†è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit åº”ç”¨ä¸­ã€‚

#### ä»»åŠ¡ - å°†ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit

å°†æ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit åº”ç”¨ä¸­ã€‚

1. åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º `temperature-sensor` çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `app.py` çš„å•æ–‡ä»¶ Python åº”ç”¨ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ª Python è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶æ·»åŠ  CounterFit çš„ pip åŒ…ã€‚

    > âš ï¸ å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥å‚è€ƒ[ç¬¬ 1 è¯¾ä¸­åˆ›å»ºå’Œè®¾ç½® CounterFit Python é¡¹ç›®çš„è¯´æ˜](../../../1-getting-started/lessons/1-introduction-to-iot/virtual-device.md)ã€‚

1. å®‰è£…ä¸€ä¸ªé¢å¤–çš„ Pip åŒ…ï¼Œç”¨äºå®‰è£… DHT11 ä¼ æ„Ÿå™¨çš„ CounterFit shimã€‚ç¡®ä¿æ‚¨æ˜¯åœ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒçš„ç»ˆç«¯ä¸­å®‰è£…çš„ã€‚

    ```sh
    pip install counterfit-shims-seeed-python-dht
    ```

1. ç¡®ä¿ CounterFit Web åº”ç”¨æ­£åœ¨è¿è¡Œã€‚

1. åˆ›å»ºä¸€ä¸ªæ¹¿åº¦ä¼ æ„Ÿå™¨ï¼š

    1. åœ¨ *Sensors* é¢æ¿çš„ *Create sensor* æ¡†ä¸­ï¼Œç‚¹å‡» *Sensor type* ä¸‹æ‹‰æ¡†å¹¶é€‰æ‹© *Humidity*ã€‚

    1. å°† *Units* ä¿æŒä¸º *Percentage*ã€‚

    1. ç¡®ä¿ *Pin* è®¾ç½®ä¸º *5*ã€‚

    1. ç‚¹å‡» **Add** æŒ‰é’®ï¼Œåœ¨ Pin 5 ä¸Šåˆ›å»ºæ¹¿åº¦ä¼ æ„Ÿå™¨ã€‚

    ![æ¹¿åº¦ä¼ æ„Ÿå™¨è®¾ç½®](../../../../translated_images/counterfit-create-humidity-sensor.2750e27b6f30e09cf4e22101defd5252710717620816ab41ba688f91f757c49a.zh.png)

    æ¹¿åº¦ä¼ æ„Ÿå™¨å°†è¢«åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨ä¼ æ„Ÿå™¨åˆ—è¡¨ä¸­ã€‚

    ![æ¹¿åº¦ä¼ æ„Ÿå™¨å·²åˆ›å»º](../../../../translated_images/counterfit-humidity-sensor.7b12f7f339e430cb26c8211d2dba4ef75261b353a01da0932698b5bebd693f27.zh.png)

1. åˆ›å»ºä¸€ä¸ªæ¸©åº¦ä¼ æ„Ÿå™¨ï¼š

    1. åœ¨ *Sensors* é¢æ¿çš„ *Create sensor* æ¡†ä¸­ï¼Œç‚¹å‡» *Sensor type* ä¸‹æ‹‰æ¡†å¹¶é€‰æ‹© *Temperature*ã€‚

    1. å°† *Units* ä¿æŒä¸º *Celsius*ã€‚

    1. ç¡®ä¿ *Pin* è®¾ç½®ä¸º *6*ã€‚

    1. ç‚¹å‡» **Add** æŒ‰é’®ï¼Œåœ¨ Pin 6 ä¸Šåˆ›å»ºæ¸©åº¦ä¼ æ„Ÿå™¨ã€‚

    ![æ¸©åº¦ä¼ æ„Ÿå™¨è®¾ç½®](../../../../translated_images/counterfit-create-temperature-sensor.199350ed34f7343d79dccbe95eaf6c11d2121f03d1c35ab9613b330c23f39b29.zh.png)

    æ¸©åº¦ä¼ æ„Ÿå™¨å°†è¢«åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨ä¼ æ„Ÿå™¨åˆ—è¡¨ä¸­ã€‚

    ![æ¸©åº¦ä¼ æ„Ÿå™¨å·²åˆ›å»º](../../../../translated_images/counterfit-temperature-sensor.f0560236c96a9016bafce7f6f792476fe3367bc6941a1f7d5811d144d4bcbfff.zh.png)

## ç¼–å†™æ¸©åº¦ä¼ æ„Ÿå™¨åº”ç”¨ç¨‹åº

ç°åœ¨å¯ä»¥ä½¿ç”¨ CounterFit ä¼ æ„Ÿå™¨ç¼–å†™æ¸©åº¦ä¼ æ„Ÿå™¨åº”ç”¨ç¨‹åºã€‚

### ä»»åŠ¡ - ç¼–å†™æ¸©åº¦ä¼ æ„Ÿå™¨åº”ç”¨ç¨‹åº

ç¼–å†™æ¸©åº¦ä¼ æ„Ÿå™¨åº”ç”¨ç¨‹åºã€‚

1. ç¡®ä¿åœ¨ VS Code ä¸­æ‰“å¼€äº† `temperature-sensor` åº”ç”¨ã€‚

1. æ‰“å¼€ `app.py` æ–‡ä»¶ã€‚

1. åœ¨ `app.py` æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå°†åº”ç”¨ç¨‹åºè¿æ¥åˆ° CounterFitï¼š

    ```python
    from counterfit_connection import CounterFitConnection
    CounterFitConnection.init('127.0.0.1', 5000)
    ```

1. åœ¨ `app.py` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ä»¥å¯¼å…¥æ‰€éœ€çš„åº“ï¼š

    ```python
    import time
    from counterfit_shims_seeed_python_dht import DHT
    ```

    `from seeed_dht import DHT` è¯­å¥å¯¼å…¥äº† `DHT` ä¼ æ„Ÿå™¨ç±»ï¼Œç”¨äºé€šè¿‡ `counterfit_shims_seeed_python_dht` æ¨¡å—çš„ shim ä¸è™šæ‹Ÿ Grove æ¸©åº¦ä¼ æ„Ÿå™¨äº¤äº’ã€‚

1. åœ¨ä¸Šè¿°ä»£ç ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œä»¥åˆ›å»ºç®¡ç†è™šæ‹Ÿæ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨çš„ç±»å®ä¾‹ï¼š

    ```python
    sensor = DHT("11", 5)
    ```

    è¿™å£°æ˜äº†ä¸€ä¸ª `DHT` ç±»çš„å®ä¾‹ï¼Œç”¨äºç®¡ç†è™šæ‹Ÿçš„**æ•°å­—æ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨**ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å‘Šè¯‰ä»£ç ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿ *DHT11* ä¼ æ„Ÿå™¨ã€‚ç¬¬äºŒä¸ªå‚æ•°å‘Šè¯‰ä»£ç ä¼ æ„Ÿå™¨è¿æ¥åˆ°ç«¯å£ `5`ã€‚

    > ğŸ’ CounterFit é€šè¿‡è¿æ¥ä¸¤ä¸ªä¼ æ„Ÿå™¨æ¥æ¨¡æ‹Ÿè¿™ä¸ªç»„åˆçš„æ¹¿åº¦å’Œæ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œä¸€ä¸ªæ¹¿åº¦ä¼ æ„Ÿå™¨è¿æ¥åˆ°åˆ›å»º `DHT` ç±»æ—¶ç»™å®šçš„å¼•è„šï¼Œå¦ä¸€ä¸ªæ¸©åº¦ä¼ æ„Ÿå™¨è¿è¡Œåœ¨ä¸‹ä¸€ä¸ªå¼•è„šä¸Šã€‚å¦‚æœæ¹¿åº¦ä¼ æ„Ÿå™¨åœ¨å¼•è„š 5 ä¸Šï¼Œshim ä¼šæœŸæœ›æ¸©åº¦ä¼ æ„Ÿå™¨åœ¨å¼•è„š 6 ä¸Šã€‚

1. åœ¨ä¸Šè¿°ä»£ç ä¹‹åæ·»åŠ ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä»¥è½®è¯¢æ¸©åº¦ä¼ æ„Ÿå™¨çš„å€¼å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š

    ```python
    while True:
        _, temp = sensor.read()
        print(f'Temperature {temp}Â°C')
    ```

    è°ƒç”¨ `sensor.read()` ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ¹¿åº¦å’Œæ¸©åº¦çš„å…ƒç»„ã€‚æ‚¨åªéœ€è¦æ¸©åº¦å€¼ï¼Œå› æ­¤å¯ä»¥å¿½ç•¥æ¹¿åº¦å€¼ã€‚ç„¶åå°†æ¸©åº¦å€¼æ‰“å°åˆ°æ§åˆ¶å°ã€‚

1. åœ¨å¾ªç¯æœ«å°¾æ·»åŠ ä¸€ä¸ª 10 ç§’çš„å°å»¶è¿Ÿï¼Œå› ä¸ºæ¸©åº¦æ°´å¹³ä¸éœ€è¦è¿ç»­æ£€æŸ¥ã€‚å»¶è¿Ÿå¯ä»¥å‡å°‘è®¾å¤‡çš„åŠŸè€—ã€‚

    ```python
    time.sleep(10)
    ```

1. åœ¨ VS Code çš„ç»ˆç«¯ä¸­ï¼Œæ¿€æ´»è™šæ‹Ÿç¯å¢ƒåè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è¿è¡Œæ‚¨çš„ Python åº”ç”¨ç¨‹åºï¼š

    ```sh
    python app.py
    ```

1. åœ¨ CounterFit åº”ç”¨ä¸­æ›´æ”¹æ¸©åº¦ä¼ æ„Ÿå™¨çš„å€¼ï¼Œä»¥ä¾¿åº”ç”¨è¯»å–è¯¥å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€è¿›è¡Œæ›´æ”¹ï¼š

    * åœ¨æ¸©åº¦ä¼ æ„Ÿå™¨çš„ *Value* æ¡†ä¸­è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚æ‚¨è¾“å…¥çš„æ•°å­—å°†æ˜¯ä¼ æ„Ÿå™¨è¿”å›çš„å€¼ã€‚

    * å‹¾é€‰ *Random* å¤é€‰æ¡†ï¼Œå¹¶è¾“å…¥ *Min* å’Œ *Max* å€¼ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚æ¯æ¬¡ä¼ æ„Ÿå™¨è¯»å–å€¼æ—¶ï¼Œå®ƒå°†è¯»å–ä¸€ä¸ªä»‹äº *Min* å’Œ *Max* ä¹‹é—´çš„éšæœºæ•°ã€‚

    æ‚¨åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æ‚¨è®¾ç½®çš„å€¼ã€‚æ›´æ”¹ *Value* æˆ– *Random* è®¾ç½®ä»¥æŸ¥çœ‹å€¼çš„å˜åŒ–ã€‚

    ```text
    (.venv) âœ  temperature-sensor python app.py
    Temperature 28.25Â°C
    Temperature 30.71Â°C
    Temperature 25.17Â°C
    ```

> ğŸ’ æ‚¨å¯ä»¥åœ¨ [code-temperature/virtual-device](../../../../../2-farm/lessons/1-predict-plant-growth/code-temperature/virtual-device) æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æ­¤ä»£ç ã€‚

ğŸ˜€ æ‚¨çš„æ¸©åº¦ä¼ æ„Ÿå™¨ç¨‹åºè¿è¡ŒæˆåŠŸï¼
