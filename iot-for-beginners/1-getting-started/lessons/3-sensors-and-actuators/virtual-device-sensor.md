<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "11f10c6760fb8202cf368422702fdf70",
  "translation_date": "2025-08-24T23:24:08+00:00",
  "source_file": "1-getting-started/lessons/3-sensors-and-actuators/virtual-device-sensor.md",
  "language_code": "zh"
}
-->
# åˆ¶ä½œä¸€ä¸ªå¤œç¯ - è™šæ‹Ÿç‰©è”ç½‘ç¡¬ä»¶

åœ¨æœ¬èŠ‚è¯¾ç¨‹ä¸­ï¼Œæ‚¨å°†ä¸ºè™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡æ·»åŠ ä¸€ä¸ªå…‰ä¼ æ„Ÿå™¨ã€‚

## è™šæ‹Ÿç¡¬ä»¶

å¤œç¯éœ€è¦ä¸€ä¸ªä¼ æ„Ÿå™¨ï¼Œé€šè¿‡ CounterFit åº”ç”¨ç¨‹åºåˆ›å»ºã€‚

è¿™ä¸ªä¼ æ„Ÿå™¨æ˜¯ä¸€ä¸ª**å…‰ä¼ æ„Ÿå™¨**ã€‚åœ¨å®é™…çš„ç‰©è”ç½‘è®¾å¤‡ä¸­ï¼Œå®ƒä¼šæ˜¯ä¸€ä¸ª[å…‰ç”µäºŒæç®¡](https://wikipedia.org/wiki/Photodiode)ï¼Œå°†å…‰è½¬æ¢ä¸ºç”µä¿¡å·ã€‚å…‰ä¼ æ„Ÿå™¨æ˜¯ä¸€ç§æ¨¡æ‹Ÿä¼ æ„Ÿå™¨ï¼Œå®ƒå‘é€ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¡¨ç¤ºç›¸å¯¹çš„å…‰é‡ï¼Œä½†è¿™ä¸ªå€¼å¹¶ä¸å¯¹åº”ä»»ä½•æ ‡å‡†çš„æµ‹é‡å•ä½ï¼Œä¾‹å¦‚ [lux](https://wikipedia.org/wiki/Lux)ã€‚

### å°†ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit

è¦ä½¿ç”¨è™šæ‹Ÿå…‰ä¼ æ„Ÿå™¨ï¼Œæ‚¨éœ€è¦å°†å…¶æ·»åŠ åˆ° CounterFit åº”ç”¨ç¨‹åºä¸­ã€‚

#### ä»»åŠ¡ - å°†ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit

å°†å…‰ä¼ æ„Ÿå™¨æ·»åŠ åˆ° CounterFit åº”ç”¨ç¨‹åºä¸­ã€‚

1. ç¡®ä¿ CounterFit Web åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼ˆä»æœ¬ä½œä¸šçš„ä¸Šä¸€éƒ¨åˆ†å¼€å§‹ï¼‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·å¯åŠ¨å®ƒã€‚

1. åˆ›å»ºä¸€ä¸ªå…‰ä¼ æ„Ÿå™¨ï¼š

    1. åœ¨ *Sensors* é¢æ¿çš„ *Create sensor* æ¡†ä¸­ï¼Œç‚¹å‡» *Sensor type* ä¸‹æ‹‰æ¡†å¹¶é€‰æ‹© *Light*ã€‚

    1. å°† *Units* ä¿æŒä¸º *NoUnits*ã€‚

    1. ç¡®ä¿ *Pin* è®¾ç½®ä¸º *0*ã€‚

    1. ç‚¹å‡» **Add** æŒ‰é’®ï¼Œåœ¨ Pin 0 ä¸Šåˆ›å»ºå…‰ä¼ æ„Ÿå™¨ã€‚

    ![å…‰ä¼ æ„Ÿå™¨è®¾ç½®](../../../../translated_images/counterfit-create-light-sensor.9f36a5e0d4458d8d554d54b34d2c806d56093d6e49fddcda2d20f6fef7f5cce1.zh.png)

    å…‰ä¼ æ„Ÿå™¨å°†è¢«åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨ä¼ æ„Ÿå™¨åˆ—è¡¨ä¸­ã€‚

    ![å…‰ä¼ æ„Ÿå™¨å·²åˆ›å»º](../../../../translated_images/counterfit-light-sensor.5d0f5584df56b90f6b2561910d9cb20dfbd73eeff2177c238d38f4de54aefae1.zh.png)

## ç¼–ç¨‹å…‰ä¼ æ„Ÿå™¨

ç°åœ¨å¯ä»¥å¯¹è®¾å¤‡è¿›è¡Œç¼–ç¨‹ï¼Œä»¥ä½¿ç”¨å†…ç½®çš„å…‰ä¼ æ„Ÿå™¨ã€‚

### ä»»åŠ¡ - ç¼–ç¨‹å…‰ä¼ æ„Ÿå™¨

å¯¹è®¾å¤‡è¿›è¡Œç¼–ç¨‹ã€‚

1. åœ¨ VS Code ä¸­æ‰“å¼€æ‚¨åœ¨æœ¬ä½œä¸šä¸Šä¸€éƒ¨åˆ†ä¸­åˆ›å»ºçš„å¤œç¯é¡¹ç›®ã€‚å¦‚æœéœ€è¦ï¼Œè¯·ç»ˆæ­¢å¹¶é‡æ–°åˆ›å»ºç»ˆç«¯ï¼Œä»¥ç¡®ä¿å®ƒæ­£åœ¨ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œã€‚

1. æ‰“å¼€ `app.py` æ–‡ä»¶ã€‚

1. åœ¨ `app.py` æ–‡ä»¶é¡¶éƒ¨çš„ `import` è¯­å¥éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œä»¥å¯¼å…¥ä¸€äº›æ‰€éœ€çš„åº“ï¼š

    ```python
    import time
    from counterfit_shims_grove.grove_light_sensor_v1_2 import GroveLightSensor
    ```

    `import time` è¯­å¥å¯¼å…¥äº† Python çš„ `time` æ¨¡å—ï¼Œè¯¥æ¨¡å—å°†åœ¨æœ¬ä½œä¸šåç»­éƒ¨åˆ†ä½¿ç”¨ã€‚

    `from counterfit_shims_grove.grove_light_sensor_v1_2 import GroveLightSensor` è¯­å¥ä» CounterFit Grove shim Python åº“ä¸­å¯¼å…¥äº† `GroveLightSensor`ã€‚è¯¥åº“åŒ…å«ä¸ CounterFit åº”ç”¨ç¨‹åºä¸­åˆ›å»ºçš„å…‰ä¼ æ„Ÿå™¨äº¤äº’çš„ä»£ç ã€‚

1. åœ¨æ–‡ä»¶åº•éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œä»¥åˆ›å»ºç®¡ç†å…‰ä¼ æ„Ÿå™¨çš„ç±»å®ä¾‹ï¼š

    ```python
    light_sensor = GroveLightSensor(0)
    ```

    `light_sensor = GroveLightSensor(0)` è¿™ä¸€è¡Œåˆ›å»ºäº†ä¸€ä¸ªè¿æ¥åˆ° Pin **0** çš„ `GroveLightSensor` ç±»å®ä¾‹â€”â€”è¿™æ˜¯å…‰ä¼ æ„Ÿå™¨è¿æ¥åˆ°çš„ CounterFit Grove å¼•è„šã€‚

1. åœ¨ä¸Šè¿°ä»£ç ä¹‹åæ·»åŠ ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œç”¨äºè½®è¯¢å…‰ä¼ æ„Ÿå™¨çš„å€¼å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š

    ```python
    while True:
        light = light_sensor.light
        print('Light level:', light)
    ```

    è¿™æ®µä»£ç å°†ä½¿ç”¨ `GroveLightSensor` ç±»çš„ `light` å±æ€§è¯»å–å½“å‰å…‰ç…§æ°´å¹³ã€‚è¯¥å±æ€§ä»å¼•è„šè¯»å–æ¨¡æ‹Ÿå€¼ï¼Œç„¶åå°†è¯¥å€¼æ‰“å°åˆ°æ§åˆ¶å°ã€‚

1. åœ¨ `while` å¾ªç¯çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªä¸€ç§’çš„å»¶è¿Ÿï¼Œå› ä¸ºå…‰ç…§æ°´å¹³ä¸éœ€è¦è¢«è¿ç»­æ£€æŸ¥ã€‚å»¶è¿Ÿå¯ä»¥å‡å°‘è®¾å¤‡çš„åŠŸè€—ã€‚

    ```python
    time.sleep(1)
    ```

1. åœ¨ VS Code çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è¿è¡Œæ‚¨çš„ Python åº”ç”¨ç¨‹åºï¼š

    ```sh
    python3 app.py
    ```

    å…‰ç…§å€¼å°†è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚åˆå§‹å€¼å°†ä¸º 0ã€‚

1. åœ¨ CounterFit åº”ç”¨ç¨‹åºä¸­æ›´æ”¹å…‰ä¼ æ„Ÿå™¨çš„å€¼ï¼Œè¯¥å€¼å°†è¢«åº”ç”¨ç¨‹åºè¯»å–ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ›´æ”¹ï¼š

    * åœ¨å…‰ä¼ æ„Ÿå™¨çš„ *Value* æ¡†ä¸­è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚æ‚¨è¾“å…¥çš„æ•°å­—å°†æ˜¯ä¼ æ„Ÿå™¨è¿”å›çš„å€¼ã€‚

    * å‹¾é€‰ *Random* å¤é€‰æ¡†ï¼Œå¹¶è¾“å…¥ *Min* å’Œ *Max* å€¼ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚æ¯æ¬¡ä¼ æ„Ÿå™¨è¯»å–å€¼æ—¶ï¼Œå®ƒå°†è¯»å–ä¸€ä¸ªä»‹äº *Min* å’Œ *Max* ä¹‹é—´çš„éšæœºæ•°ã€‚

    æ‚¨è®¾ç½®çš„å€¼å°†è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æ›´æ”¹ *Value* æˆ– *Random* è®¾ç½®ä»¥ä½¿å€¼å‘ç”Ÿå˜åŒ–ã€‚

    ```text
    (.venv) âœ  GroveTest python3 app.py 
    Light level: 143
    Light level: 244
    Light level: 246
    Light level: 253
    ```

> ğŸ’ æ‚¨å¯ä»¥åœ¨ [code-sensor/virtual-device](../../../../../1-getting-started/lessons/3-sensors-and-actuators/code-sensor/virtual-device) æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°è¿™æ®µä»£ç ã€‚

ğŸ˜€ æ‚¨çš„å¤œç¯ç¨‹åºæˆåŠŸäº†ï¼
