<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a3fdfec1d1e2cb645ea11c2930b51299",
  "translation_date": "2025-08-24T21:06:27+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/single-board-computer-object-detector.md",
  "language_code": "zh"
}
-->
# ä»ç‰©è”ç½‘è®¾å¤‡è°ƒç”¨å¯¹è±¡æ£€æµ‹å™¨ - è™šæ‹Ÿç‰©è”ç½‘ç¡¬ä»¶å’Œæ ‘è“æ´¾

ä¸€æ—¦ä½ çš„å¯¹è±¡æ£€æµ‹å™¨å‘å¸ƒåï¼Œå°±å¯ä»¥ä»ç‰©è”ç½‘è®¾å¤‡ä¸­ä½¿ç”¨å®ƒã€‚

## å¤åˆ¶å›¾åƒåˆ†ç±»å™¨é¡¹ç›®

ä½ çš„åº“å­˜æ£€æµ‹å™¨çš„å¤§éƒ¨åˆ†å†…å®¹ä¸ä¹‹å‰è¯¾ç¨‹ä¸­åˆ›å»ºçš„å›¾åƒåˆ†ç±»å™¨ç›¸åŒã€‚

### ä»»åŠ¡ - å¤åˆ¶å›¾åƒåˆ†ç±»å™¨é¡¹ç›®

1. åˆ›å»ºä¸€ä¸ªåä¸º `stock-counter` çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡ï¼Œå¯ä»¥åœ¨ä½ çš„ç”µè„‘ä¸Šåˆ›å»ºï¼›å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾ï¼Œåˆ™åœ¨æ ‘è“æ´¾ä¸Šåˆ›å»ºã€‚å¦‚æœä½¿ç”¨è™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡ï¼Œè¯·ç¡®ä¿è®¾ç½®è™šæ‹Ÿç¯å¢ƒã€‚

1. è®¾ç½®æ‘„åƒå¤´ç¡¬ä»¶ã€‚

    * å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾ï¼Œéœ€è¦å®‰è£… PiCameraã€‚ä½ å¯èƒ½è¿˜éœ€è¦å°†æ‘„åƒå¤´å›ºå®šåœ¨ä¸€ä¸ªä½ç½®ï¼Œä¾‹å¦‚ï¼Œå°†ç”µç¼†æŒ‚åœ¨ä¸€ä¸ªç›’å­æˆ–ç½å­ä¸Šï¼Œæˆ–è€…ç”¨åŒé¢èƒ¶å°†æ‘„åƒå¤´å›ºå®šåœ¨ä¸€ä¸ªç›’å­ä¸Šã€‚
    * å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡ï¼Œåˆ™éœ€è¦å®‰è£… CounterFit å’Œ CounterFit PyCamera shimã€‚å¦‚æœä½ æ‰“ç®—ä½¿ç”¨é™æ€å›¾åƒï¼Œè¯·æ•è·ä¸€äº›å¯¹è±¡æ£€æµ‹å™¨å°šæœªè§è¿‡çš„å›¾åƒï¼›å¦‚æœä½ æ‰“ç®—ä½¿ç”¨ç½‘ç»œæ‘„åƒå¤´ï¼Œè¯·ç¡®ä¿æ‘„åƒå¤´çš„ä½ç½®èƒ½å¤Ÿçœ‹åˆ°ä½ è¦æ£€æµ‹çš„åº“å­˜ã€‚

1. å¤åˆ¶[åˆ¶é€ é¡¹ç›®ç¬¬ 2 è¯¾](../../../4-manufacturing/lessons/2-check-fruit-from-device/index.md#task---capture-an-image-using-an-iot-device)ä¸­çš„æ­¥éª¤ï¼Œä»æ‘„åƒå¤´æ•è·å›¾åƒã€‚

1. å¤åˆ¶[åˆ¶é€ é¡¹ç›®ç¬¬ 2 è¯¾](../../../4-manufacturing/lessons/2-check-fruit-from-device/index.md#task---classify-images-from-your-iot-device)ä¸­çš„æ­¥éª¤ï¼Œè°ƒç”¨å›¾åƒåˆ†ç±»å™¨ã€‚å¤§éƒ¨åˆ†ä»£ç å°†è¢«é‡ç”¨æ¥æ£€æµ‹å¯¹è±¡ã€‚

## å°†ä»£ç ä»åˆ†ç±»å™¨æ›´æ”¹ä¸ºå›¾åƒæ£€æµ‹å™¨

ç”¨äºåˆ†ç±»å›¾åƒçš„ä»£ç ä¸ç”¨äºæ£€æµ‹å¯¹è±¡çš„ä»£ç éå¸¸ç›¸ä¼¼ã€‚ä¸»è¦åŒºåˆ«åœ¨äºè°ƒç”¨ Custom Vision SDK çš„æ–¹æ³•ä»¥åŠè°ƒç”¨çš„ç»“æœã€‚

### ä»»åŠ¡ - å°†ä»£ç ä»åˆ†ç±»å™¨æ›´æ”¹ä¸ºå›¾åƒæ£€æµ‹å™¨

1. åˆ é™¤ç”¨äºåˆ†ç±»å›¾åƒå’Œå¤„ç†é¢„æµ‹çš„ä¸‰è¡Œä»£ç ï¼š

    ```python
    results = predictor.classify_image(project_id, iteration_name, image)
    
    for prediction in results.predictions:
        print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%')
    ```

    åˆ é™¤è¿™ä¸‰è¡Œä»£ç ã€‚

1. æ·»åŠ ä»¥ä¸‹ä»£ç ä»¥æ£€æµ‹å›¾åƒä¸­çš„å¯¹è±¡ï¼š

    ```python
    results = predictor.detect_image(project_id, iteration_name, image)

    threshold = 0.3
    
    predictions = list(prediction for prediction in results.predictions if prediction.probability > threshold)
    
    for prediction in predictions:
        print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%')
    ```

    è¿™æ®µä»£ç è°ƒç”¨é¢„æµ‹å™¨çš„ `detect_image` æ–¹æ³•æ¥è¿è¡Œå¯¹è±¡æ£€æµ‹å™¨ã€‚ç„¶åæ”¶é›†æ‰€æœ‰æ¦‚ç‡é«˜äºé˜ˆå€¼çš„é¢„æµ‹ï¼Œå¹¶å°†å®ƒä»¬æ‰“å°åˆ°æ§åˆ¶å°ã€‚

    ä¸å›¾åƒåˆ†ç±»å™¨æ¯ä¸ªæ ‡ç­¾åªè¿”å›ä¸€ä¸ªç»“æœä¸åŒï¼Œå¯¹è±¡æ£€æµ‹å™¨ä¼šè¿”å›å¤šä¸ªç»“æœï¼Œå› æ­¤éœ€è¦è¿‡æ»¤æ‰æ¦‚ç‡è¾ƒä½çš„ç»“æœã€‚

1. è¿è¡Œè¿™æ®µä»£ç ï¼Œå®ƒå°†æ•è·ä¸€å¼ å›¾åƒï¼Œå‘é€åˆ°å¯¹è±¡æ£€æµ‹å™¨ï¼Œå¹¶æ‰“å°å‡ºæ£€æµ‹åˆ°çš„å¯¹è±¡ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿç‰©è”ç½‘è®¾å¤‡ï¼Œè¯·ç¡®ä¿åœ¨ CounterFit ä¸­è®¾ç½®äº†åˆé€‚çš„å›¾åƒï¼Œæˆ–è€…é€‰æ‹©äº†ç½‘ç»œæ‘„åƒå¤´ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾ï¼Œè¯·ç¡®ä¿æ‘„åƒå¤´å¯¹å‡†äº†è´§æ¶ä¸Šçš„ç‰©å“ã€‚

    ```text
    pi@raspberrypi:~/stock-counter $ python3 app.py 
    tomato paste:   34.13%
    tomato paste:   33.95%
    tomato paste:   35.05%
    tomato paste:   32.80%
    ```

    > ğŸ’ ä½ å¯èƒ½éœ€è¦è°ƒæ•´ `threshold` çš„å€¼ä»¥é€‚åº”ä½ çš„å›¾åƒã€‚

    ä½ å°†èƒ½å¤Ÿåœ¨ Custom Vision çš„ **Predictions** æ ‡ç­¾ä¸­çœ‹åˆ°æ‹æ‘„çš„å›¾åƒå’Œè¿™äº›é¢„æµ‹å€¼ã€‚

    ![è´§æ¶ä¸Šæœ‰ 4 ç½ç•ªèŒ„é…±ï¼Œé¢„æµ‹ç»“æœä¸º 35.8%ã€33.5%ã€25.7% å’Œ 16.6%](../../../../translated_images/custom-vision-stock-prediction.942266ab1bcca3410ecdf23643b9f5f570cfab2345235074e24c51f285777613.zh.png)

> ğŸ’ ä½ å¯ä»¥åœ¨ [code-detect/pi](../../../../../5-retail/lessons/2-check-stock-device/code-detect/pi) æˆ– [code-detect/virtual-iot-device](../../../../../5-retail/lessons/2-check-stock-device/code-detect/virtual-iot-device) æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°è¿™æ®µä»£ç ã€‚

ğŸ˜€ ä½ çš„åº“å­˜è®¡æ•°ç¨‹åºæˆåŠŸäº†ï¼
